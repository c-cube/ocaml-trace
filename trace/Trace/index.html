<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Trace (trace.Trace)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta name="generator" content="odoc 3.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> – <a href="../../index.html">Index</a> &#x00BB; <a href="../index.html">trace</a> &#x00BB; Trace</nav><header class="odoc-preamble"><h1>Module <code><span>Trace</span></code></h1><p>Shim that just forwards to <a href="../Trace_core/index.html"><code>Trace_core</code></a>.</p><p>The reason is, <code>Trace</code> is already defined in the compiler libs and can clash with this module inside a toplevel. So it's safer to only depend on <code>Trace_core</code> in libraries that might end up used in a toplevel.</p></header><div class="odoc-content"><div class="odoc-include"><details open="open"><summary class="spec include"><code><span><span class="keyword">include</span> <span class="keyword">module</span> <span class="keyword">type</span> <span class="keyword">of</span> <span class="keyword">struct</span> <span class="keyword">include</span> <a href="../Trace_core/index.html">Trace_core</a> <span class="keyword">end</span></span></code></summary><div class="odoc-spec"><div class="spec type anchored" id="type-span"><a href="#type-span" class="anchor"></a><code><span><span class="keyword">type</span> span</span><span> = <a href="../Trace_core/index.html#type-span">Trace_core.span</a></span><span> = </span><span>..</span></code></div><div class="spec-doc"><p>A span. Its representation is defined by the current collector.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-parent"><a href="#type-parent" class="anchor"></a><code><span><span class="keyword">type</span> parent</span><span> = <a href="../Trace_core/index.html#type-parent">Trace_core.parent</a></span><span> = </span></code><ol><li id="type-parent.P_unknown" class="def variant constructor anchored"><a href="#type-parent.P_unknown" class="anchor"></a><code><span>| </span><span><span class="constructor">P_unknown</span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Parent is not specified at this point</p><span class="comment-delim">*)</span></div></li><li id="type-parent.P_none" class="def variant constructor anchored"><a href="#type-parent.P_none" class="anchor"></a><code><span>| </span><span><span class="constructor">P_none</span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>We know the current span has no parent</p><span class="comment-delim">*)</span></div></li><li id="type-parent.P_some" class="def variant constructor anchored"><a href="#type-parent.P_some" class="anchor"></a><code><span>| </span><span><span class="constructor">P_some</span> <span class="keyword">of</span> <a href="#type-span">span</a></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>We know the parent of the current span</p><span class="comment-delim">*)</span></div></li></ol></div><div class="spec-doc"><p>Information about a span's parent span, if any.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 0.11</li></ul></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-user_data"><a href="#type-user_data" class="anchor"></a><code><span><span class="keyword">type</span> user_data</span><span> = </span><span>[ </span></code><ol><li id="type-user_data.Int" class="def variant constructor anchored"><a href="#type-user_data.Int" class="anchor"></a><code><span>| </span><span>`Int <span class="keyword">of</span> int</span></code></li><li id="type-user_data.String" class="def variant constructor anchored"><a href="#type-user_data.String" class="anchor"></a><code><span>| </span><span>`String <span class="keyword">of</span> string</span></code></li><li id="type-user_data.Bool" class="def variant constructor anchored"><a href="#type-user_data.Bool" class="anchor"></a><code><span>| </span><span>`Bool <span class="keyword">of</span> bool</span></code></li><li id="type-user_data.Float" class="def variant constructor anchored"><a href="#type-user_data.Float" class="anchor"></a><code><span>| </span><span>`Float <span class="keyword">of</span> float</span></code></li><li id="type-user_data.None" class="def variant constructor anchored"><a href="#type-user_data.None" class="anchor"></a><code><span>| </span><span>`None</span></code></li></ol><code><span> ]</span></code></div><div class="spec-doc"><p>User defined data, generally passed as key/value pairs to whatever collector is installed (if any).</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-explicit_span"><a href="#type-explicit_span" class="anchor"></a><code><span><span class="keyword">type</span> explicit_span</span><span> = <a href="#type-span">span</a></span></code></div><div class="spec-doc"><ul class="at-tags"><li class="deprecated"><span class="at-tag">deprecated</span> use span</li></ul></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-explicit_span_ctx"><a href="#type-explicit_span_ctx" class="anchor"></a><code><span><span class="keyword">type</span> explicit_span_ctx</span><span> = <a href="#type-span">span</a></span></code></div><div class="spec-doc"><ul class="at-tags"><li class="deprecated"><span class="at-tag">deprecated</span> use span</li></ul></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-extension_parameter"><a href="#type-extension_parameter" class="anchor"></a><code><span><span class="keyword">type</span> extension_parameter</span><span> = <a href="../Trace_core/index.html#type-extension_parameter">Trace_core.extension_parameter</a></span><span> = </span><span>..</span></code></div><div class="spec-doc"><p>An extension parameter, used to carry information for spans/messages/metrics that can be backend-specific or just not envisioned by <code>trace</code>.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 0.11</li></ul></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-metric"><a href="#type-metric" class="anchor"></a><code><span><span class="keyword">type</span> metric</span><span> = <a href="../Trace_core/index.html#type-metric">Trace_core.metric</a></span><span> = </span><span>..</span></code></div><div class="spec-doc"><p>A metric, can be of many types. See <a href="../Trace_core/Core_ext/index.html"><code>Core_ext</code></a> for some builtin metrics.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 0.11</li></ul></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Collector"><a href="#module-Collector" class="anchor"></a><code><span><span class="keyword">module</span> Collector</span><span> = <a href="../Trace_core/Collector/index.html">Trace_core.Collector</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Level"><a href="#module-Level" class="anchor"></a><code><span><span class="keyword">module</span> Level</span><span> = <a href="../Trace_core/Level/index.html">Trace_core.Level</a></span></code></div></div><h3 id="tracing"><a href="#tracing" class="anchor"></a>Tracing</h3><div class="odoc-spec"><div class="spec value anchored" id="val-enabled"><a href="#val-enabled" class="anchor"></a><code><span><span class="keyword">val</span> enabled : <span>unit <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Is there a collector?</p><p>This is fast, so that the traced program can check it before creating any span or message.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_default_level"><a href="#val-get_default_level" class="anchor"></a><code><span><span class="keyword">val</span> get_default_level : <span>unit <span class="arrow">&#45;&gt;</span></span> <a href="../Trace_core/Level/index.html#type-t">Level.t</a></span></code></div><div class="spec-doc"><p>Current default level for spans.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 0.7</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_default_level"><a href="#val-set_default_level" class="anchor"></a><code><span><span class="keyword">val</span> set_default_level : <span><a href="../Trace_core/Level/index.html#type-t">Level.t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Set level used for spans that do not specify it. The default default value is <code>Level.Trace</code>.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 0.7</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-with_span"><a href="#val-with_span" class="anchor"></a><code><span><span class="keyword">val</span> with_span : 
  <span><span class="optlabel">?level</span>:<a href="../Trace_core/Level/index.html#type-t">Level.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?__FUNCTION__</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">__FILE__</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">__LINE__</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?parent</span>:<span><a href="#type-span">span</a> option</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?params</span>:<span><a href="#type-extension_parameter">extension_parameter</a> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?data</span>:<span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span><span>(string * <a href="#type-user_data">user_data</a>)</span> list</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><a href="#type-span">span</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>with_span ~__FILE__ ~__LINE__ name f</code> enters a new span <code>sp</code>, and calls <code>f sp</code>. <code>sp</code> might be a dummy span if no collector is installed. When <code>f sp</code> returns or raises, the span <code>sp</code> is exited.</p><p>This is the recommended way to instrument most code.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">level</span> <p>optional level for this span. since 0.7. Default is set via <a href="#val-set_default_level"><code>set_default_level</code></a>.</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">parent</span> <p>the span's parent, if any. since 0.11.</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">params</span> <p>extension parameters, used to communicate additional information to the collector. It might be collector-specific. since 0.11.</p></li></ul><p>Depending on the collector, this might clash with some forms of cooperative concurrency in which <code>with_span (fun span -&gt; …)</code> might contain a yield point. Effect-based fibers, etc. might not play well with this style of spans on some or all backends. If you use cooperative concurrency, a safer alternative can be <a href="#val-enter_span"><code>enter_span</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-enter_span"><a href="#val-enter_span" class="anchor"></a><code><span><span class="keyword">val</span> enter_span : 
  <span><span class="optlabel">?level</span>:<a href="../Trace_core/Level/index.html#type-t">Level.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?__FUNCTION__</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">__FILE__</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">__LINE__</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?flavor</span>:<span>[ `Sync <span>| `Async</span> ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?parent</span>:<span><a href="#type-span">span</a> option</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?params</span>:<span><a href="#type-extension_parameter">extension_parameter</a> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?data</span>:<span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span><span>(string * <a href="#type-user_data">user_data</a>)</span> list</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-span">span</a></span></code></div><div class="spec-doc"><p>Enter a span manually. This means the caller is responsible for exiting the span exactly once on every path that exits the current scope. The context must be passed to the exit function as is.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">level</span> <p>optional level for this span. since 0.7. Default is set via <a href="#val-set_default_level"><code>set_default_level</code></a>.</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">parent</span> <p>the span's parent, if any. since 0.11.</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">params</span> <p>see <a href="#val-with_span"><code>with_span</code></a>.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-exit_span"><a href="#val-exit_span" class="anchor"></a><code><span><span class="keyword">val</span> exit_span : <span><a href="#type-span">span</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Exit a span manually. Spans must be nested correctly (ie form a stack or tree).</p><p>For some collectors, <code>enter_span</code> and <code>exit_span</code> must run on the same thread (e.g. Tracy). For some others, it doesn't matter.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-add_data_to_span"><a href="#val-add_data_to_span" class="anchor"></a><code><span><span class="keyword">val</span> add_data_to_span : <span><a href="#type-span">span</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(string * <a href="#type-user_data">user_data</a>)</span> list</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Add structured data to the given active span (see <a href="#val-with_span"><code>with_span</code></a>). Behavior is not specified if the span has been exited.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 0.4</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-message"><a href="#val-message" class="anchor"></a><code><span><span class="keyword">val</span> message : 
  <span><span class="optlabel">?level</span>:<a href="../Trace_core/Level/index.html#type-t">Level.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?span</span>:<a href="#type-span">span</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?params</span>:<span><a href="#type-extension_parameter">extension_parameter</a> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?data</span>:<span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span><span>(string * <a href="#type-user_data">user_data</a>)</span> list</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p><code>message msg</code> logs a message <code>msg</code> (if a collector is installed). Additional metadata can be provided.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">level</span> <p>optional level for this span. since 0.7. Default is set via <a href="#val-set_default_level"><code>set_default_level</code></a>.</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">span</span> <p>the surrounding span, if any. This might be ignored by the collector.</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">params</span> <p>extension parameters, used to communicate additional information to the collector. It might be collector-specific. since 0.11.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-messagef"><a href="#val-messagef" class="anchor"></a><code><span><span class="keyword">val</span> messagef : 
  <span><span class="optlabel">?level</span>:<a href="../Trace_core/Level/index.html#type-t">Level.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?span</span>:<a href="#type-span">span</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?params</span>:<span><a href="#type-extension_parameter">extension_parameter</a> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?data</span>:<span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span><span>(string * <a href="#type-user_data">user_data</a>)</span> list</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span>(<span><span><span>(<span class="type-var">'a</span>, <a href="../../ocaml/Stdlib/Format/index.html#type-formatter">Stdlib.Format.formatter</a>, unit, unit)</span> <a href="../../ocaml/Stdlib/index.html#type-format4">format4</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p><code>messagef (fun k-&gt;k&quot;hello %s %d!&quot; &quot;world&quot; 42)</code> is like <code>message &quot;hello world 42!&quot;</code> but only computes the string formatting if a collector is installed.</p><p>See <a href="#val-message"><code>message</code></a> for a description of the other arguments.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_thread_name"><a href="#val-set_thread_name" class="anchor"></a><code><span><span class="keyword">val</span> set_thread_name : <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Give a name to the current thread. This might be used by the collector to display traces in a more informative way.</p><p>Uses <a href="../Trace_core/Core_ext/index.html#extension-Extension_set_thread_name"><code>Core_ext.Extension_set_thread_name</code></a> since 0.11</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_process_name"><a href="#val-set_process_name" class="anchor"></a><code><span><span class="keyword">val</span> set_process_name : <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Give a name to the current process. This might be used by the collector to display traces in a more informative way.</p><p>Uses <a href="../Trace_core/Core_ext/index.html#extension-Extension_set_process_name"><code>Core_ext.Extension_set_process_name</code></a> since 0.11</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-metric"><a href="#val-metric" class="anchor"></a><code><span><span class="keyword">val</span> metric : 
  <span><span class="optlabel">?level</span>:<a href="../Trace_core/Level/index.html#type-t">Level.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?params</span>:<span><a href="#type-extension_parameter">extension_parameter</a> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?data</span>:<span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span><span>(string * <a href="#type-user_data">user_data</a>)</span> list</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-metric">metric</a> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p>Emit a metric. Metrics are an extensible type, each collector might support a different subset.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 0.11</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-counter_int"><a href="#val-counter_int" class="anchor"></a><code><span><span class="keyword">val</span> counter_int : 
  <span><span class="optlabel">?level</span>:<a href="../Trace_core/Level/index.html#type-t">Level.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?params</span>:<span><a href="#type-extension_parameter">extension_parameter</a> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?data</span>:<span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span><span>(string * <a href="#type-user_data">user_data</a>)</span> list</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span>int <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p>Emit a counter of type <code>int</code> via <a href="#val-metric"><code>metric</code></a>. Counters represent the evolution of some quantity over time.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">level</span> <p>optional level for this span. since 0.7. Default is set via <a href="#val-set_default_level"><code>set_default_level</code></a>.</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">data</span> <p>metadata for this metric (since 0.4)</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-counter_float"><a href="#val-counter_float" class="anchor"></a><code><span><span class="keyword">val</span> counter_float : 
  <span><span class="optlabel">?level</span>:<a href="../Trace_core/Level/index.html#type-t">Level.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?params</span>:<span><a href="#type-extension_parameter">extension_parameter</a> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?data</span>:<span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span><span>(string * <a href="#type-user_data">user_data</a>)</span> list</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span>float <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p>Emit a counter of type <code>float</code> via <a href="#val-metric"><code>metric</code></a>. See <a href="#val-counter_int"><code>counter_int</code></a> for more details.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">level</span> <p>optional level for this span. since 0.7. Default is set via <a href="#val-set_default_level"><code>set_default_level</code></a>.</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">data</span> <p>metadata for this metric (since 0.4)</p></li></ul></div></div><h3 id="collector"><a href="#collector" class="anchor"></a>Collector</h3><div class="odoc-spec"><div class="spec type anchored" id="type-collector"><a href="#type-collector" class="anchor"></a><code><span><span class="keyword">type</span> collector</span><span> = <a href="../Trace_core/Collector/index.html#type-t">Collector.t</a></span></code></div><div class="spec-doc"><p>An event collector. See <a href="../Trace_core/Collector/index.html"><code>Collector</code></a> for more details.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-setup_collector"><a href="#val-setup_collector" class="anchor"></a><code><span><span class="keyword">val</span> setup_collector : <span><a href="#type-collector">collector</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>setup_collector c</code> installs <code>c</code> as the current collector.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <code>Invalid_argument</code> <p>if there already is an established collector.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_current_level"><a href="#val-get_current_level" class="anchor"></a><code><span><span class="keyword">val</span> get_current_level : <span>unit <span class="arrow">&#45;&gt;</span></span> <a href="../Trace_core/Level/index.html#type-t">Level.t</a></span></code></div><div class="spec-doc"><p>Get current level. This is only meaningful if a collector was set up with <a href="#val-setup_collector"><code>setup_collector</code></a>.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 0.7</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_current_level"><a href="#val-set_current_level" class="anchor"></a><code><span><span class="keyword">val</span> set_current_level : <span><a href="../Trace_core/Level/index.html#type-t">Level.t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Set the current level of tracing. This only has a visible effect if a collector was installed with <a href="#val-setup_collector"><code>setup_collector</code></a>.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 0.7</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-shutdown"><a href="#val-shutdown" class="anchor"></a><code><span><span class="keyword">val</span> shutdown : <span>unit <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>shutdown ()</code> shutdowns the current collector, if one was installed, and waits for it to terminate before returning.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-with_setup_collector"><a href="#val-with_setup_collector" class="anchor"></a><code><span><span class="keyword">val</span> with_setup_collector : <span><a href="../Trace_core/Collector/index.html#type-t">Collector.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>with_setup_collector c f</code> installs <code>c</code>, calls <code>f()</code>, and shutdowns <code>c</code> once <code>f()</code> is done.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 0.11</li></ul></div></div><h3 id="extensions"><a href="#extensions" class="anchor"></a>Extensions</h3><div class="odoc-spec"><div class="spec type anchored" id="type-extension_event"><a href="#type-extension_event" class="anchor"></a><code><span><span class="keyword">type</span> extension_event</span><span> = </span><span>..</span></code></div><div class="spec-doc"><p>Extension event</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 0.8</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-extension_event"><a href="#val-extension_event" class="anchor"></a><code><span><span class="keyword">val</span> extension_event : <span><span class="optlabel">?level</span>:<a href="../Trace_core/Level/index.html#type-t">Level.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-extension_event">extension_event</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Trigger an extension event, whose meaning depends on the library that defines it. Some collectors will simply ignore it. This does nothing if no collector is setup.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">level</span> <p>filtering level, since 0.11</p></li></ul><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 0.8</li></ul></div></div><h3 id="core-extensions"><a href="#core-extensions" class="anchor"></a>Core extensions</h3><div class="odoc-spec"><div class="spec module anchored" id="module-Core_ext"><a href="#module-Core_ext" class="anchor"></a><code><span><span class="keyword">module</span> Core_ext</span><span> = <a href="../Trace_core/Core_ext/index.html">Trace_core.Core_ext</a></span></code></div></div><h3 id="deprecated"><a href="#deprecated" class="anchor"></a>Deprecated</h3><div class="odoc-spec"><div class="spec value anchored" id="val-enter_manual_span"><a href="#val-enter_manual_span" class="anchor"></a><code><span><span class="keyword">val</span> enter_manual_span : 
  <span><span class="label">parent</span>:<span><a href="#type-explicit_span_ctx">explicit_span_ctx</a> option</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?flavor</span>:<span>[ `Sync <span>| `Async</span> ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?level</span>:<a href="../Trace_core/Level/index.html#type-t">Level.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?__FUNCTION__</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">__FILE__</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">__LINE__</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?data</span>:<span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span><span>(string * <a href="#type-user_data">user_data</a>)</span> list</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-explicit_span">explicit_span</a></span></code></div><div class="spec-doc"><ul class="at-tags"><li class="deprecated"><span class="at-tag">deprecated</span> use enter_span</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-enter_manual_sub_span"><a href="#val-enter_manual_sub_span" class="anchor"></a><code><span><span class="keyword">val</span> enter_manual_sub_span : 
  <span><span class="label">parent</span>:<a href="#type-explicit_span">explicit_span</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?flavor</span>:<span>[ `Sync <span>| `Async</span> ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?level</span>:<a href="../Trace_core/Level/index.html#type-t">Level.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?__FUNCTION__</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">__FILE__</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">__LINE__</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?data</span>:<span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span><span>(string * <a href="#type-user_data">user_data</a>)</span> list</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-explicit_span">explicit_span</a></span></code></div><div class="spec-doc"><ul class="at-tags"><li class="deprecated"><span class="at-tag">deprecated</span> <p>since 0.10, use <a href="#val-enter_span"><code>enter_span</code></a></p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-enter_manual_toplevel_span"><a href="#val-enter_manual_toplevel_span" class="anchor"></a><code><span><span class="keyword">val</span> enter_manual_toplevel_span : 
  <span><span class="optlabel">?flavor</span>:<span>[ `Sync <span>| `Async</span> ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?level</span>:<a href="../Trace_core/Level/index.html#type-t">Level.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?__FUNCTION__</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">__FILE__</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">__LINE__</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?data</span>:<span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span><span>(string * <a href="#type-user_data">user_data</a>)</span> list</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-explicit_span">explicit_span</a></span></code></div><div class="spec-doc"><ul class="at-tags"><li class="deprecated"><span class="at-tag">deprecated</span> <p>since 0.10 use <a href="#val-enter_span"><code>enter_span</code></a></p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-exit_manual_span"><a href="#val-exit_manual_span" class="anchor"></a><code><span><span class="keyword">val</span> exit_manual_span : <span><a href="#type-explicit_span">explicit_span</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><ul class="at-tags"><li class="deprecated"><span class="at-tag">deprecated</span> <p>since 0.10 use <a href="#val-exit_span"><code>exit_span</code></a></p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-add_data_to_manual_span"><a href="#val-add_data_to_manual_span" class="anchor"></a><code><span><span class="keyword">val</span> add_data_to_manual_span : 
  <span><a href="#type-explicit_span">explicit_span</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(string * <a href="#type-user_data">user_data</a>)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><ul class="at-tags"><li class="deprecated"><span class="at-tag">deprecated</span> <p>since 0.10 use <a href="#val-add_data_to_span"><code>add_data_to_span</code></a></p></li></ul></div></div></details></div></div></body></html>
